---
description: "SincronizaÃ§Ã£o de Componentes Store â€” Admin e Web"
globs:
  - "apps/admin/components/store/**/*.tsx"
  - "apps/web/components/store/**/*.tsx"
alwaysApply: true
---

# ğŸ¨ Regras de SincronizaÃ§Ã£o de Componentes Store

## ğŸ“‹ PrincÃ­pio Fundamental

**Todo componente localizado no diretÃ³rio `/components/store` â€” tanto na aplicaÃ§Ã£o admin quanto na web â€” deve ser EXATAMENTE IGUAL em estrutura, props, UI, lÃ³gica e comportamento.**

## âœ… O Que Deve Ser IdÃªntico

### 1. Estrutura do CÃ³digo
- Mesma estrutura de arquivo
- Mesmas importaÃ§Ãµes (exceto wrappers do Craft.js)
- Mesma organizaÃ§Ã£o de funÃ§Ãµes e hooks
- Mesma ordem de declaraÃ§Ãµes

### 2. Props e Interface
- **Exatamente as mesmas props** (mesmos nomes, tipos, valores padrÃ£o)
- Mesma interface TypeScript/PropTypes
- Mesmos valores opcionais e obrigatÃ³rios

### 3. UI e Design
- **Mesmo design visual** (classes CSS, estilos, cores)
- **Mesma responsividade** (breakpoints, layouts mobile/desktop)
- **Mesmas animaÃ§Ãµes e transiÃ§Ãµes**
- **Mesmos estados visuais** (hover, focus, disabled, loading)

### 4. LÃ³gica e Comportamento
- **Mesma lÃ³gica de negÃ³cio**
- **Mesmos cÃ¡lculos e transformaÃ§Ãµes de dados**
- **Mesmos efeitos colaterais** (quando aplicÃ¡vel)
- **Mesmos handlers de eventos**

### 5. Acessibilidade
- Mesmos atributos ARIA
- Mesma navegaÃ§Ã£o por teclado
- Mesmos labels e descriÃ§Ãµes

## ğŸ”„ DiferenÃ§a Permitida

### Ãšnica DiferenÃ§a: Modo de RenderizaÃ§Ã£o

**No Admin (`apps/admin/components/store/`):**
- O componente deve funcionar em **modo preview** para o editor da loja (Craft.js)
- Pode ter wrappers do Craft.js para ediÃ§Ã£o no editor
- Deve renderizar exatamente como serÃ¡ visto no site final

**Na Web (`apps/web/components/store/`):**
- O componente deve funcionar como **renderizaÃ§Ã£o real** no site do cliente
- Sem wrappers de editor
- RenderizaÃ§Ã£o direta para o usuÃ¡rio final

## ğŸš« O Que NUNCA Deve Divergir

### Proibido:
- âŒ Adicionar props diferentes entre admin e web
- âŒ Alterar estilos visuais em um e nÃ£o no outro
- âŒ Modificar lÃ³gica de negÃ³cio em apenas uma versÃ£o
- âŒ Criar comportamentos diferentes
- âŒ Adicionar funcionalidades extras em apenas uma versÃ£o
- âŒ Alterar estrutura HTML/JSX
- âŒ Mudar ordem de elementos
- âŒ Adicionar ou remover classes CSS em apenas uma versÃ£o

## ğŸ“ Estrutura Esperada

### Componente Base (Compartilhado)

```typescript
// apps/web/components/store/hero.tsx
// apps/admin/components/store/hero.tsx
// DEVEM SER IDÃŠNTICOS (exceto wrappers Craft.js no admin)

interface HeroProps {
  imageUrl?: string
  // ... outras props
}

export function Hero({ imageUrl, ...props }: HeroProps) {
  // LÃ³gica idÃªntica
  // UI idÃªntica
  // Comportamento idÃªntico
}
```

### Wrapper Craft.js (Apenas no Admin)

```typescript
// apps/admin/components/store/hero.tsx
// Pode ter wrapper Craft.js APENAS se necessÃ¡rio para ediÃ§Ã£o

import { Hero as HeroBase } from '@/components/store/hero'

// OU se o componente jÃ¡ tem craft configurado:
Hero.craft = {
  displayName: 'Hero',
  props: { /* ... */ },
  related: { settings: HeroSettings }
}
```

## ğŸ” Checklist de SincronizaÃ§Ã£o

Ao modificar um componente store, verificar:

- [ ] As props sÃ£o idÃªnticas em ambas as versÃµes?
- [ ] A UI renderiza exatamente igual?
- [ ] A lÃ³gica de negÃ³cio Ã© a mesma?
- [ ] Os estilos CSS sÃ£o idÃªnticos?
- [ ] A responsividade funciona igual?
- [ ] Os handlers de eventos sÃ£o os mesmos?
- [ ] Os tipos TypeScript sÃ£o idÃªnticos?
- [ ] Os valores padrÃ£o sÃ£o os mesmos?

## ğŸ› ï¸ ManutenÃ§Ã£o

### Ao Criar um Novo Componente Store:

1. Criar o componente base em `apps/web/components/store/`
2. **Copiar EXATAMENTE** para `apps/admin/components/store/`
3. Adicionar wrappers Craft.js apenas no admin (se necessÃ¡rio)
4. Garantir que ambos renderizam identicamente

### Ao Modificar um Componente Existente:

1. Modificar o componente em **ambas as localizaÃ§Ãµes simultaneamente**
2. Manter as mudanÃ§as **idÃªnticas** em ambos
3. Testar que ambos renderizam igual
4. Verificar que o preview no admin corresponde Ã  renderizaÃ§Ã£o na web

### Ao Adicionar Funcionalidade:

1. Adicionar em **ambas as versÃµes** ao mesmo tempo
2. Manter a implementaÃ§Ã£o **idÃªntica**
3. NÃ£o criar "versÃµes especiais" para admin ou web

## ğŸ“ Exemplo de ViolaÃ§Ã£o

### âŒ ERRADO:

```typescript
// apps/web/components/store/hero.tsx
export function Hero({ imageUrl }: HeroProps) {
  return <img src={imageUrl} className="w-full" />
}

// apps/admin/components/store/hero.tsx
export function Hero({ imageUrl, showEditButton }: HeroProps) { // âŒ Props diferentes!
  return (
    <div>
      <img src={imageUrl} className="w-full h-auto" /> {/* âŒ Classes diferentes! */}
      {showEditButton && <button>Editar</button>} {/* âŒ Funcionalidade extra! */}
    </div>
  )
}
```

### âœ… CORRETO:

```typescript
// apps/web/components/store/hero.tsx
export function Hero({ imageUrl }: HeroProps) {
  return <img src={imageUrl} className="w-full h-auto" />
}

// apps/admin/components/store/hero.tsx
// EXATAMENTE IGUAL
export function Hero({ imageUrl }: HeroProps) {
  return <img src={imageUrl} className="w-full h-auto" />
}

// Wrapper Craft.js separado (se necessÃ¡rio)
Hero.craft = {
  displayName: 'Hero',
  props: { imageUrl: '' }
}
```

## ğŸ¯ Objetivo Final

**Garantir que o preview no editor admin seja uma representaÃ§Ã£o 100% fiel do que serÃ¡ renderizado no site do cliente, eliminando surpresas e inconsistÃªncias entre desenvolvimento e produÃ§Ã£o.**
